{
    "__type__": "task_card",
    "loader": {
        "__type__": "load_hf",
        "path": "Multilingual-Multimodal-NLP/TableBench",
        "data_classification_policy": [
            "public"
        ]
    },
    "preprocess_steps": [
        {
            "__type__": "split_random_mix",
            "mix": {
                "train": "test[20%]",
                "validation": "test[20%]",
                "test": "test[60%]"
            }
        },
        {
            "__type__": "filter_by_condition",
            "values": {
                "instruction_type": "DP"
            },
            "condition": "eq"
        },
        {
            "__type__": "filter_by_condition",
            "values": {
                "qtype": [
                    "Visualization"
                ]
            },
            "condition": "in"
        },
        {
            "__type__": "apply",
            "function": "json.loads",
            "to_field": "table",
            "_argv": [
                "table"
            ]
        },
        {
            "__type__": "rename",
            "field_to_field": {
                "table/columns": "table/header",
                "table/data": "table/rows"
            }
        },
        {
            "__type__": "set",
            "fields": {
                "context_type": "Table"
            }
        },
        {
            "__type__": "rename",
            "field_to_field": {
                "table": "context",
                "answer": "answers"
            }
        }
    ],
    "task": {
        "__type__": "task",
        "input_fields": {
            "context": "Table",
            "context_type": "str",
            "question": "str",
            "answer_formatter": "str"
        },
        "reference_fields": {
            "answers": "str"
        },
        "prediction_type": "str",
        "metrics": [
            "metrics.rouge"
        ],
        "augmentable_inputs": [
            "context",
            "question"
        ]
    },
    "templates": [
        {
            "__type__": "input_output_template",
            "input_format": "You are a table analyst. Your task is to answer questions based on the table content. {answer_formatter} \n{context_type}: {context} \nQuestion: {question}",
            "output_format": "```python\nimport pandas as pd \nimport matplotlib.pyplot as plt\ndf = pd.read_csv('table.csv')\n{answers}\nplt.show()\n```",
            "target_prefix": "Final Answer: ",
            "postprocessors": [
                "processors.remove_substrings",
                "processors.filter_python_comment_lines",
                "processors.lower_case",
                "processors.remove_punctuations",
                "processors.remove_articles",
                "processors.fix_whitespace"
            ]
        }
    ],
    "__description__": "This TableBench dataset is a Comprehensive and Complex Benchmark for Table Question Answering. For more details, refer to https://tablebench.github.io/",
    "__tags__": {
        "modality": "table",
        "urls": {
            "arxiv": "https://www.arxiv.org/pdf/2408.09174"
        },
        "languages": [
            "english"
        ]
    }
}
